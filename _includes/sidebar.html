<h3 class="sidebar-heading">Thèmes</h3>
<ul class="theme-list">
    <li {% if page.url contains '/apps/' and page.url contains 'theme=all' or page.url == '/apps/' %}class="active"{% endif %}>
        <a href="{{ '/apps/' | relative_url }}" data-theme="all"> {# AJOUT DE data-theme="all" #}
            <span class="theme-name">Toutes les applications</span>
            <span class="theme-count">{{ site.applications | size }}</span>
        </a>
    </li>

    {% assign sorted_themes = site.applications | map: "theme" | uniq | sort %}
    {% for theme in sorted_themes %}
        {% assign theme_slug = theme | slugify %} {# CRÉATION DU SLUG #}
        <li {% if page.url contains '/apps/' and page.url contains 'theme=' | append: theme_slug %}class="active"{% endif %}>
            <a href="{{ '/apps/?theme=' | append: theme_slug | relative_url }}" data-theme="{{ theme_slug }}"> {# UTILISE data-theme #}
                <span class="theme-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z" fill="hsl({{ theme | hash | modulo: 360 }}, 70%, 85%)"/>
                        <path d="M12 6V18M6 12H18" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </span>
                <span class="theme-name">{{ theme }}</span>
                <span class="theme-count">{{ site.applications | where: "theme", theme | size }}</span>
            </a>
        </li>
    {% endfor %}
</ul>
